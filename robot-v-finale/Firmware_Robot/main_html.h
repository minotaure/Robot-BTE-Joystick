#define HTML_CODE "<!DOCTYPE html>\n"\
"<html>\n"\
"<head>\n"\
"    <meta charset=\"utf-8\">\n"\
"    <meta name=\"viewport\" content=\"user-scalable=no\">\n"\
"    <link rel=\"icon\" type=\"image/svg+xml\" href=\"data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8'%3F%3E%3Csvg clip-rule='evenodd' fill-rule='evenodd' image-rendering='optimizeQuality' shape-rendering='geometricPrecision' text-rendering='geometricPrecision' version='1.1' viewBox='0 0 1173 1173' xmlns='http://www.w3.org/2000/svg'%3E%3Cg transform='translate(0,84)'%3E%3Cpath d='m458.5-0.5h3c-38.401 19.031-75.734 39.864-112 62.5-69.667 46.544-122.17 107.71-157.5 183.5-31.396 75.925-37.729 153.92-19 234 7.39 31.964 22.89 59.131 46.5 81.5 13.642 11.486 29.308 18.653 47 21.5 2.86-11.579 6.526-22.912 11-34-35.106-51.033-53.606-107.7-55.5-170-2.416-38.501 3.917-75.501 19-111 19.352-42.738 44.686-81.404 76-116 27.2-29.709 56.7-56.709 88.5-81-54.821 60.546-94.654 130.55-119.5 210-18.38 61.058-8.714 117.06 29 168 3.799 4.801 7.966 9.301 12.5 13.5 10.625-10.462 21.292-21.295 32-32.5-34.491-28.97-46.991-65.637-37.5-110 10.875-29.793 22.041-59.459 33.5-89 0.333 1 0.667 2 1 3-2.03 31.634-2.863 63.3-2.5 95 3.339 28.658 18.506 47.825 45.5 57.5 6.667 0.667 13.333 0.667 20 0 81.172-44.146 166.5-54.48 256-31 26.659 7.552 51.993 18.219 76 32 15.719 3.394 29.719 0.061 42-10 14.605-12.041 22.772-27.541 24.5-46.5 0.368-31.869-0.466-63.702-2.5-95.5 0.333-0.833 0.667-1.667 1-2.5 11.321 28.128 22.155 56.462 32.5 85 11.503 46.155-0.997 84.322-37.5 114.5 11.77 9.768 22.937 20.268 33.5 31.5 42.233-45.729 57.567-99.396 46-161-22.225-87.404-63.892-163.74-125-229-0.667-0.6667-0.667-1.3333 0-2 60.331 44.649 109.66 98.983 148 163 37.163 65.483 46.497 134.82 28 208-8.04 36.229-22.207 69.729-42.5 100.5 6.02 12.896 11.354 26.063 16 39.5 33.639-11.804 57.472-34.137 71.5-67 15.74-39.612 23.24-80.779 22.5-123.5-0.69-85.411-27.189-161.58-79.5-228.5-31.148-39.157-67.315-72.657-108.5-100.5-35.7-21.855-72.367-42.189-110-61 74.449 26.735 144.78 63.069 211 109 80.7 60.161 132.2 139.66 154.5 238.5 20.21 109.66-6.46 206-80 289-20.667 23.333-42.667 45.333-66 66-10.84 109.05-61.673 193.55-152.5 253.5-93.277 55.25-191.28 65.25-294 30-35.613-13.345-67.947-32.011-97-56-23.5-19.5-45-41-64.5-64.5-33.889-44.132-55.555-93.798-65-149-39.846-34.175-75.846-71.842-108-113-59.459-85.069-76.126-178.07-50-279 30.821-107.23 94.321-188.73 190.5-244.5 53.785-32.059 109.78-59.559 168-82.5zm127 406c68.698-2.502 130.7 16.331 186 56.5 27.781 23.279 49.781 51.113 66 83.5-29.991 3.221-59.658 8.387-89 15.5-29.321 6.07-53.821 20.236-73.5 42.5-22.27 27.346-40.103 57.512-53.5 90.5 0.667 0.667 1.333 0.667 2 0 12.51-12.518 26.177-23.518 41-33 28.079 2.742 56.246 4.576 84.5 5.5 14.101 0.658 27.934-0.842 41.5-4.5 8.877-5.548 15.71-13.048 20.5-22.5 5.645-12.768 9.145-26.101 10.5-40 12.845 0.363 25.512 2.03 38 5 21.413 111.6-10.587 204.44-96 278.5-71.647 54.992-151.98 73.658-241 56-44.412-10.042-84.079-29.375-119-58-75.59-77.508-100.09-169.01-73.5-274.5 5.148-2.668 10.648-4.501 16.5-5.5 9.26-1.788 18.593-2.955 28-3.5 1.395 16.246 5.895 31.579 13.5 46 7.693 13.102 19.193 19.935 34.5 20.5 17 0.667 34 0.667 51 0 19.05-1.525 38.05-3.192 57-5 14.861 9.856 28.861 20.856 42 33 0.667 0.667 1.333 0.667 2 0-14.158-34.176-32.991-65.343-56.5-93.5-19.737-20.291-43.57-33.458-71.5-39.5-29.434-6.893-59.101-12.06-89-15.5 52.785-83.751 128.78-129.75 228-138zm-201 193c20.234-0.203 39.9 3.63 59 11.5 27.254 12.289 53.254 26.622 78 43-32.846-3.086-65.179-9.086-97-18-16.706-8.542-30.039-20.709-40-36.5zm415 1c4.014-0.166 8.014 1e-3 12 0.5-9.877 16.545-23.544 28.878-41 37-31.863 8.699-64.197 14.699-97 18 22.857-14.6 46.523-27.933 71-40 17.729-7.749 36.063-12.916 55-15.5z' fill='%23357cc5' opacity='.987'/%3E%3C/g%3E%3C/svg%3E%0A\"/>\n"\
"    <title>\n"\
"        Theseus Alpha\n"\
"    </title>\n"\
"</head>\n"\
"<body style=\"position: fixed; font-family: 'Gill Sans', 'Gill Sans MT', Calibri, 'Trebuchet MS', sans-serif ;\n"\
"color:rgb(128, 128, 128);\n"\
"font-size: xx-large;\n"\
"overscroll-behavior-y: contain;\">\n"\
"    <canvas id=\"canvas\" name=\"game\"></canvas>\n"\
"    <script>\n"\
"        const serverPath = \"api/set_movement\";\n"\
"\n"\
"        var refresh_pos_needed = false;\n"\
"        var requests_pending = 0;\n"\
"\n"\
"        var last_forward = 0;\n"\
"        var last_right = 0;\n"\
"\n"\
"        function RegisterPos(pos_x, pos_y) {\n"\
"            var forward = -Math.round(256 * pos_y / radius);\n"\
"            var right = Math.round(128 * pos_x / radius);\n"\
"\n"\
"            last_forward = forward;\n"\
"            last_right = right;\n"\
"\n"\
"            if (requests_pending == 0) {\n"\
"                setTimeout(SendVelocity, 0);\n"\
"                requests_pending ++;\n"\
"            } else {\n"\
"                refresh_pos_needed = true;\n"\
"            }\n"\
"        }\n"\
"\n"\
"        function SendVelocity() {\n"\
"            if (requests_pending > 1) {\n"\
"                return;\n"\
"            }\n"\
"\n"\
"            refresh_pos_needed = false\n"\
"            r = fetch(serverPath, {\n"\
"                method: \"PUT\",\n"\
"                headers: {\n"\
"                    'Content-Type':'application/json'\n"\
"                },\n"\
"                body: JSON.stringify({forward: last_forward, right: last_right})\n"\
"            });\n"\
"\n"\
"            r.then(PosSent, PosSent)\n"\
"        }\n"\
"\n"\
"        function PosSent() {\n"\
"            if (refresh_pos_needed) {\n"\
"                setTimeout(SendVelocity, 10);\n"\
"            } else {\n"\
"                requests_pending --;\n"\
"            }\n"\
"        }\n"\
"        \n"\
"        var canvas, ctx;\n"\
"\n"\
"        window.addEventListener('load', () => {\n"\
"\n"\
"            canvas = document.getElementById('canvas');\n"\
"            ctx = canvas.getContext('2d');          \n"\
"            resize(); \n"\
"\n"\
"            document.addEventListener('mousedown', startDrawing);\n"\
"            document.addEventListener('mouseup', stopDrawing);\n"\
"            document.addEventListener('mousemove', Draw);\n"\
"\n"\
"            document.addEventListener('touchstart', startDrawing, {passive : false});   // Not set to passive to prevent the page from reloading on smartphones\n"\
"            document.addEventListener('touchend', stopDrawing);\n"\
"            document.addEventListener('touchcancel', stopDrawing);\n"\
"            document.addEventListener('touchmove', Draw, {passive : false});    // Not set to passive to prevent the page from reloading on smartphones\n"\
"            window.addEventListener('resize', resize);\n"\
"\n"\
"            document.addEventListener(\"keydown\", handleKeyPress);\n"\
"            document.addEventListener(\"keyup\", handleKeyRelease);\n"\
"        });\n"\
"\n"\
"      \n"\
"\n"\
"\n"\
"        var width, height, radius, x_orig, y_orig;\n"\
"        function resize() {\n"\
"            radius = Math.min(window.innerWidth, window.innerHeight) / 5;\n"\
"            width = window.innerWidth;\n"\
"            height = radius * 5;\n"\
"            ctx.canvas.width = width;\n"\
"            ctx.canvas.height = height;\n"\
"            x_orig = width / 2;\n"\
"            y_orig = height / 2;\n"\
"            background();\n"\
"            joystick(0, 0);\n"\
"        }\n"\
"\n"\
"        function background() {\n"\
"            ctx.beginPath();\n"\
"            ctx.arc(x_orig, y_orig, radius + 20, 0, Math.PI * 2, true);\n"\
"            ctx.fillStyle = '#ECE5E5';\n"\
"            ctx.fill();\n"\
"        }\n"\
"\n"\
"        function joystick(pos_x, pos_y) {\n"\
"            ResetCanvas();\n"\
"\n"\
"            var magnitude = Math.sqrt(pos_x*pos_x + pos_y*pos_y);\n"\
"            if (magnitude > radius) {\n"\
"                pos_x = radius * pos_x / magnitude;\n"\
"                pos_y = radius * pos_y / magnitude;\n"\
"            }\n"\
"\n"\
"            RegisterPos(pos_x, pos_y);\n"\
"\n"\
"            ctx.beginPath();\n"\
"            ctx.arc(pos_x + x_orig, pos_y + y_orig, radius, 0, Math.PI * 2, true);\n"\
"            ctx.fillStyle = '#F08080';\n"\
"            ctx.fill();\n"\
"            ctx.strokeStyle = '#F6ABAB';\n"\
"            ctx.lineWidth = 8;\n"\
"            ctx.stroke();\n"\
"        }\n"\
"\n"\
"        let paint = false;\n"\
"\n"\
"        function getPosition(event) {\n"\
"            var mouse_x = event.clientX || event.touches[0].clientX;\n"\
"            var mouse_y = event.clientY || event.touches[0].clientY;\n"\
"            var x = mouse_x - canvas.offsetLeft - x_orig;\n"\
"            var y = mouse_y - canvas.offsetTop - y_orig;\n"\
"            return [x, y];\n"\
"        }\n"\
"\n"\
"\n"\
"        function startDrawing(event) {\n"\
"            if (isPressingKey) {\n"\
"                return;\n"\
"            }\n"\
"            paint = true;\n"\
"\n"\
"            Draw(event);\n"\
"        }\n"\
"\n"\
"\n"\
"        function stopDrawing() {\n"\
"            if (isPressingKey) {\n"\
"                return;\n"\
"            }\n"\
"            paint = false;\n"\
"            joystick(0, 0);\n"\
"        }\n"\
"\n"\
"        function Draw(event) {\n"\
"            if (isPressingKey) {\n"\
"                return;\n"\
"            }\n"\
"            if (paint) {\n"\
"                var [x, y] = getPosition(event);\n"\
"                joystick(x, y);\n"\
"            }\n"\
"        } \n"\
"\n"\
"        function ResetCanvas() {\n"\
"            ctx.clearRect(0, 0, width, height);\n"\
"            background();\n"\
"        }\n"\
"\n"\
"        // Variable to store pressed keys\n"\
"        var pressedKeys = {};\n"\
"        var isPressingKey = false;\n"\
"\n"\
"        // Function to handle keydown events\n"\
"        function handleKeyPress(event) {\n"\
"            var pressedKey = event.key;\n"\
"\n"\
"            // Use \"Z\", \"Q\", \"S\", \"D\" or arrow keys for control\n"\
"            switch (pressedKey) {\n"\
"                case \"z\":\n"\
"                case \"ArrowUp\":\n"\
"                    pressedKeys.forward = true;\n"\
"                    break;\n"\
"                case \"q\":\n"\
"                case \"ArrowLeft\":\n"\
"                    pressedKeys.left = true;\n"\
"                    break;\n"\
"                case \"s\":\n"\
"                case \"ArrowDown\":\n"\
"                    pressedKeys.backward = true;\n"\
"                    break;\n"\
"                case \"d\":\n"\
"                case \"ArrowRight\":\n"\
"                    pressedKeys.right = true;\n"\
"                    break;\n"\
"                default:\n"\
"                    // Do nothing if another key is pressed\n"\
"                    return;\n"\
"            }\n"\
"\n"\
"            // Call the updateInput function\n"\
"            updateInput();\n"\
"        }\n"\
"\n"\
"        // Function to handle keyup events\n"\
"        function handleKeyRelease(event) {\n"\
"            var releasedKey = event.key;\n"\
"\n"\
"            // Update pressed keys\n"\
"            switch (releasedKey) {\n"\
"                case \"z\":\n"\
"                case \"ArrowUp\":\n"\
"                    pressedKeys.forward = false;\n"\
"                    break;\n"\
"                case \"q\":\n"\
"                case \"ArrowLeft\":\n"\
"                    pressedKeys.left = false;\n"\
"                    break;\n"\
"                case \"s\":\n"\
"                case \"ArrowDown\":\n"\
"                    pressedKeys.backward = false;\n"\
"                    break;\n"\
"                case \"d\":\n"\
"                case \"ArrowRight\":\n"\
"                    pressedKeys.right = false;\n"\
"                    break;\n"\
"                default:\n"\
"                    // Do nothing if another key is released\n"\
"                    return;\n"\
"            }\n"\
"\n"\
"            // Call the updateInput function\n"\
"            updateInput();\n"\
"        }\n"\
"\n"\
"        // Function to update input\n"\
"        function updateInput() {\n"\
"            // Your input update logic here\n"\
"\n"\
"            // For example, you can check if a specific key is pressed\n"\
"            var vel_forward = 0;\n"\
"            var vel_right = 0;\n"\
"\n"\
"            if (pressedKeys.forward) {\n"\
"                vel_forward = 0.8;\n"\
"            }\n"\
"            if (pressedKeys.backward) {\n"\
"                vel_forward = -0.8;\n"\
"            }\n"\
"            if (pressedKeys.left) {\n"\
"                vel_right = -0.8;\n"\
"            }\n"\
"            if (pressedKeys.right) {\n"\
"                vel_right = 0.8;\n"\
"            }\n"\
"\n"\
"            var pos_x = vel_right * radius;\n"\
"            var pos_y = -vel_forward * radius;\n"\
"\n"\
"            // Call the sendVelocity function with the values of vel_x and vel_y\n"\
"            joystick(pos_x, pos_y);\n"\
"            RegisterPos(pos_x, pos_y);\n"\
"\n"\
"            isPressingKey = Object.values(pressedKeys).includes(true);\n"\
"            if (isPressingKey) {\n"\
"                paint = false;\n"\
"            }\n"\
"        }\n"\
"    </script>\n"\
"</body>\n"\
"</html>\n"\
"\n"